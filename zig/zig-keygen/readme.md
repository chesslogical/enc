# keygen

A simple, deterministic key generator written in Zig that produces a pseudorandom byte stream of arbitrary length (1 byte to 20 GiB), derived from a user‑supplied password. Output is written to `key.key` in the current directory.

---

## Features

- **Deterministic**: Same password & size → same output every time.
- **Large output**: Supports up to 20 GiB of key material.
- **Secure PRNG**: Uses ChaCha20 stream cipher with a SHA‑256–derived key and nonce.
- **Single‑file Zig**: No external dependencies beyond Zig’s standard library.

---

## Requirements

- [Zig](https://ziglang.org/) 0.15.0 (or later)

---

## Building

Compile a standalone executable:

```sh
zig build-exe keygen.zig -O ReleaseSafe -dynamic -o keygen
```

Alternatively, to compile & run in one step:

```sh
zig run keygen.zig -- <size_bytes> <password> > key.key
```

---

## Usage

```sh
./keygen <size_bytes> <password>
```

- `<size_bytes>`: Number of pseudorandom bytes to generate (1–21474836480).
- `<password>`: Secret string used to derive the key stream.

The generated bytes are written into `key.key`.

### Example

```sh
# Generate 1 MiB of key material from password "hunter2"
./keygen 1048576 hunter2
ls -l key.key
# key.key is now 1048576 bytes
```

---

## How It Works

1. **Key derivation**: SHA‑256(password) → 32‑byte ChaCha20 key.
2. **Nonce derivation**: SHA‑256(password ‖ "keygen-nonce") → first 12 bytes used as nonce.
3. **Keystream generation**: ChaCha20 stream cipher with a 32‑bit block counter produces up to 256 GiB of data before wrap‑around.

This ensures a single, continuous pseudorandom stream without simple repetition.

---

## License

MIT License. Feel free to use and modify as you like.

